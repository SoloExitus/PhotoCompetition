{% extends 'competition/gallery.html' %}

{% load crispy_forms_tags %}

{% block main %}
<!-- action="{% url 'api:profile-list' %}" -->
  <form id="form" action="{% url 'api:profile-list' %}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form|crispy }}
    <button  type="submit" class=" mt-3 btn btn-success">Create</button>
  </form>
{% endblock main %}

{% block customjs %}
<!--<script>-->
<!--    $(document).ready(function() {-->
<!--        $('#form').submit(function(e) { // catch the form's submit event-->
<!--            $.ajax({ // create an AJAX call...-->
<!--                data: $(this).serialize(), // get the form data-->
<!--                type: $(this).attr('GET'), // GET or POST-->
<!--                url: $(this).attr("/api/profile/"), // the file to call-->
<!--                success: function(response) { // on success.-->
<!--                 $('#content').html(response); // update the DIV-->
<!--                   // console.log(response);-->
<!--                    //window.location.href = "{% url 'profile' %}"-->
<!--                },-->
<!--                error: (error) => {-->
<!--                    console.log(error);-->
<!--                }-->
<!--            });-->
<!--            return false;-->
<!--        });-->
<!--    });-->
<!--</script>-->
<script>
$(document).ready(function() {
  $('#form').submit(function (e) {
    $.ajax({
      url: $(this).attr("/api/profile"),
      type: $(this).attr('post'),
      data: $(this).serialize(),
      success: function (response) {

      },
      error: (error) => {
        console.log(error);
      }
    });


  });
}
</script>
{% endblock customjs %}